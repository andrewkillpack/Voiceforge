<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VoiceForge — Amazon Product Voiceover</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Mono:wght@300;400;500&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #0a0a0a;
    --surface: #111111;
    --border: #222222;
    --accent: #ff4d00;
    --accent2: #ff8c42;
    --text: #f0ede8;
    --muted: #555555;
    --label: #888888;
  }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding: 60px 20px 80px;
    overflow-x: hidden;
  }

  /* Subtle noise texture overlay */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.035'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 0;
  }

  .container {
    width: 100%;
    max-width: 680px;
    position: relative;
    z-index: 1;
  }

  header {
    margin-bottom: 52px;
  }

  .logo {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 3.2rem;
    letter-spacing: 0.06em;
    line-height: 1;
    color: var(--text);
  }

  .logo span {
    color: var(--accent);
  }

  .tagline {
    font-family: 'DM Mono', monospace;
    font-size: 0.72rem;
    color: var(--muted);
    letter-spacing: 0.2em;
    text-transform: uppercase;
    margin-top: 8px;
  }

  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 36px;
    margin-bottom: 16px;
    position: relative;
  }

  .card-label {
    font-family: 'DM Mono', monospace;
    font-size: 0.65rem;
    letter-spacing: 0.22em;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .card-label::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border);
  }

  .card-label .num {
    color: var(--muted);
  }

  label {
    display: block;
    font-size: 0.82rem;
    color: var(--label);
    margin-bottom: 10px;
    font-weight: 300;
    letter-spacing: 0.03em;
  }

  input[type="text"],
  input[type="number"],
  textarea {
    width: 100%;
    background: var(--bg);
    border: 1px solid var(--border);
    color: var(--text);
    font-family: 'DM Mono', monospace;
    font-size: 0.88rem;
    padding: 14px 16px;
    outline: none;
    transition: border-color 0.2s;
    -webkit-appearance: none;
  }

  input[type="text"]:focus,
  input[type="number"]:focus,
  textarea:focus {
    border-color: var(--accent);
  }

  input[type="number"] {
    width: 160px;
  }

  textarea {
    resize: vertical;
    min-height: 100px;
    line-height: 1.6;
  }

  .duration-row {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .duration-unit {
    font-family: 'DM Mono', monospace;
    font-size: 0.78rem;
    color: var(--muted);
    letter-spacing: 0.1em;
  }

  .optional-badge {
    font-family: 'DM Mono', monospace;
    font-size: 0.6rem;
    letter-spacing: 0.15em;
    color: var(--muted);
    border: 1px solid var(--border);
    padding: 2px 7px;
    text-transform: uppercase;
    margin-left: 8px;
    vertical-align: middle;
  }

  /* Gifted checkbox */
  .checkbox-row {
    display: flex;
    align-items: center;
    gap: 14px;
    cursor: pointer;
    user-select: none;
  }

  .checkbox-row input[type="checkbox"] {
    display: none;
  }

  .custom-checkbox {
    width: 22px;
    height: 22px;
    border: 1px solid var(--border);
    background: var(--bg);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: border-color 0.2s, background 0.2s;
  }

  .checkbox-row:hover .custom-checkbox {
    border-color: var(--accent);
  }

  .checkbox-row input[type="checkbox"]:checked + .custom-checkbox {
    background: var(--accent);
    border-color: var(--accent);
  }

  .checkbox-row input[type="checkbox"]:checked + .custom-checkbox::after {
    content: '';
    width: 5px;
    height: 10px;
    border-right: 2px solid #fff;
    border-bottom: 2px solid #fff;
    transform: rotate(45deg) translate(-1px, -1px);
    display: block;
  }

  .checkbox-label {
    font-size: 0.88rem;
    color: var(--text);
    font-weight: 300;
  }

  .checkbox-label em {
    color: var(--accent);
    font-style: normal;
    font-weight: 500;
  }

  .gifted-note {
    margin-top: 10px;
    font-family: 'DM Mono', monospace;
    font-size: 0.68rem;
    color: var(--muted);
    padding-left: 36px;
    line-height: 1.5;
  }

  .generate-btn {
    width: 100%;
    background: var(--accent);
    color: #fff;
    border: none;
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.35rem;
    letter-spacing: 0.12em;
    padding: 22px;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    transition: background 0.2s;
    margin-top: 8px;
  }

  .generate-btn:hover {
    background: var(--accent2);
  }

  .generate-btn:active {
    transform: scale(0.995);
  }

  .generate-btn.loading {
    pointer-events: none;
    background: #2a1500;
    color: var(--accent);
  }

  .generate-btn .btn-inner {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
  }

  .spinner {
    width: 18px;
    height: 18px;
    border: 2px solid var(--accent);
    border-top-color: transparent;
    border-radius: 50%;
    animation: spin 0.7s linear infinite;
    display: none;
  }

  .generate-btn.loading .spinner { display: block; }
  .generate-btn.loading .btn-text::after { content: 'GENERATING...'; }
  .generate-btn:not(.loading) .btn-text::after { content: 'GENERATE VOICEOVER'; }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  /* Output section */
  .output-section {
    margin-top: 8px;
    display: none;
  }

  .output-section.visible {
    display: block;
    animation: fadeUp 0.4s ease;
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .output-card {
    background: #0d1a0a;
    border: 1px solid #1a3d12;
    padding: 36px;
    position: relative;
  }

  .output-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: 20px;
  }

  .output-label {
    font-family: 'DM Mono', monospace;
    font-size: 0.65rem;
    letter-spacing: 0.22em;
    text-transform: uppercase;
    color: #4caf50;
  }

  .copy-btn {
    background: none;
    border: 1px solid #1a3d12;
    color: #4caf50;
    font-family: 'DM Mono', monospace;
    font-size: 0.65rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    padding: 6px 12px;
    cursor: pointer;
    transition: all 0.2s;
  }

  .copy-btn:hover {
    background: #1a3d12;
  }

  .output-text {
    font-family: 'DM Sans', sans-serif;
    font-size: 1.05rem;
    line-height: 1.8;
    color: var(--text);
    font-weight: 300;
  }

  .output-meta {
    margin-top: 20px;
    padding-top: 16px;
    border-top: 1px solid #1a3d12;
    display: flex;
    gap: 24px;
  }

  .meta-item {
    font-family: 'DM Mono', monospace;
    font-size: 0.68rem;
    color: #4caf50;
    letter-spacing: 0.1em;
  }

  .meta-item span {
    color: var(--muted);
    margin-right: 6px;
  }

  .error-card {
    background: #1a0a0a;
    border: 1px solid #3d1212;
    padding: 20px 24px;
    margin-top: 8px;
    display: none;
  }

  .error-card.visible { display: block; }

  .error-text {
    font-family: 'DM Mono', monospace;
    font-size: 0.8rem;
    color: #f44336;
  }

  /* Decorative corner marks */
  .card::before {
    content: '';
    position: absolute;
    top: -1px;
    left: -1px;
    width: 16px;
    height: 16px;
    border-top: 2px solid var(--accent);
    border-left: 2px solid var(--accent);
  }
</style>
</head>
<body>
<div class="container">

  <header>
    <div class="logo">Voice<span>Forge</span></div>
    <div class="tagline">Amazon Product Review → Voiceover Script</div>
  </header>

  <!-- Amazon URL -->
  <div class="card">
    <div class="card-label"><span class="num">01</span> Product Link</div>
    <label>Paste the Amazon product URL</label>
    <input type="text" id="amazonUrl" placeholder="https://www.amazon.com/dp/..." autocomplete="off" spellcheck="false">
  </div>

  <!-- Duration -->
  <div class="card">
    <div class="card-label"><span class="num">02</span> Duration</div>
    <label>Target voiceover length</label>
    <div class="duration-row">
      <input type="number" id="duration" placeholder="30" min="5" max="300" value="30">
      <span class="duration-unit">SECONDS</span>
    </div>
  </div>

  <!-- Gifted -->
  <div class="card">
    <div class="card-label"><span class="num">03</span> Disclosure</div>
    <label class="checkbox-row">
      <input type="checkbox" id="gifted">
      <div class="custom-checkbox"></div>
      <span class="checkbox-label">This product was <em>gifted to me</em></span>
    </label>
    <div class="gifted-note">When checked, your voiceover will include a disclosure statement as required by FTC guidelines.</div>
  </div>

  <!-- Notes -->
  <div class="card">
    <div class="card-label"><span class="num">04</span> Notes <span class="optional-badge">Optional</span></div>
    <label>Any specific instructions, tone, audience, or details to include</label>
    <textarea id="notes" placeholder="e.g. Emphasize the warranty, target audience is parents, use an upbeat energetic tone..."></textarea>
  </div>

  <button class="generate-btn" id="generateBtn" onclick="generate()">
    <div class="btn-inner">
      <div class="spinner"></div>
      <span class="btn-text"></span>
    </div>
  </button>

  <div class="error-card" id="errorCard">
    <div class="error-text" id="errorText"></div>
  </div>

  <div class="output-section" id="outputSection">
    <div class="output-card">
      <div class="output-header">
        <div class="output-label">✦ Generated Voiceover</div>
        <button class="copy-btn" onclick="copyScript()">Copy Script</button>
      </div>
      <div class="output-text" id="outputText"></div>
      <div class="output-meta">
        <div class="meta-item"><span>WORDS</span><span id="wordCount">—</span></div>
        <div class="meta-item"><span>TARGET</span><span id="targetDuration">—</span></div>
        <div class="meta-item"><span>EST. DURATION</span><span id="estDuration">—</span></div>
      </div>
    </div>
  </div>

</div>

<script>
async function generate() {
  const url = document.getElementById('amazonUrl').value.trim();
  const duration = document.getElementById('duration').value.trim();
  const notes = document.getElementById('notes').value.trim();
  const gifted = document.getElementById('gifted').checked;
  const btn = document.getElementById('generateBtn');
  const errorCard = document.getElementById('errorCard');
  const outputSection = document.getElementById('outputSection');

  errorCard.classList.remove('visible');
  outputSection.classList.remove('visible');

  if (!url) return showError('Please enter an Amazon product URL.');
  if (!duration || isNaN(duration) || duration < 5) return showError('Please enter a valid duration (minimum 5 seconds).');
  if (!url.includes('amazon')) return showError('URL does not appear to be an Amazon link.');

  btn.classList.add('loading');

  try {
    const wordsNeeded = Math.round((parseInt(duration) / 60) * 150);

    const notesSection = notes
      ? '\n\nExtra details or notes to work in:\n' + notes
      : '';

    const giftedOpener = gifted
      ? 'Open with "I was gifted this [Product Name]" and then immediately jump into personal experience'
      : 'Open by jumping straight into personal experience with the product — no stiff intro or disclosure';

    const prompt = `You write product review voiceover scripts in a very specific personal style. Study this real example review to understand the exact voice, tone, and structure to replicate:

EXAMPLE (do NOT copy this content — only copy the style):
"I was gifted this KitchenStar 16-inch Pizza Stone, and I finally tried it out with our go-to homemade pizza recipe. I was honestly pleasantly surprised! The crust came out nice and crisp on the bottom, but still soft on the inside — exactly how we like it. It's 5/8-inch thick natural cordierite and heat resistant up to 1800 degrees, so it works great in the oven or on the grill. I also love that it has handles, plus it comes with a stainless steel rack and a scraper tool for easy cleanup. Just make sure to read the instructions before using so you prep and heat it properly. Definitely a solid addition to our pizza nights!"

STYLE RULES — follow every one:
1. ${giftedOpener}
2. Use "I", "we", "our" — real person sharing with a friend, not a presenter
3. Share a genuine, slightly surprised positive reaction ("I was honestly pleasantly surprised!")
4. Describe results in sensory or practical terms — no marketing language
5. Naturally weave in 2–3 specific product specs mid-sentence (material, dimensions, what's included, ratings, etc.) — don't list them separately
6. Include one "I also love that..." or "what I really like is..." moment
7. End with one helpful heads-up or tip ("just make sure to...", "one thing to note...")
8. Close with a short, warm low-key recommendation — NOT a big CTA (e.g. "Definitely a solid addition to..." / "Really happy with this one.")
9. Conversational rhythm — short to medium sentences, em dashes, casual punctuation are all fine
10. Sound like someone actually talking, not reading a script

Product URL: ${url}
Target length: ${duration} seconds (~${wordsNeeded} words at 150 words/minute)
${notesSection}

Use placeholders like [Product Name], [Material], [Key Spec] if you don't have specific product details.
IMPORTANT: Your script must be EXACTLY ${wordsNeeded} words. Count carefully — do not go over or under by more than 3 words.
Write ONLY the spoken words — no labels, no stage directions, no formatting.`;

    const response = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        model: 'claude-sonnet-4-20250514',
        max_tokens: 1000,
        messages: [{ role: 'user', content: prompt }]
      })
    });

    const data = await response.json();

    if (data.error) throw new Error(data.error.message);

    const script = data.content?.[0]?.text?.trim();
    if (!script) throw new Error('No script was generated.');

    const words = script.split(/\s+/).filter(Boolean).length;
    const estSecs = Math.round((words / 150) * 60);

    document.getElementById('outputText').textContent = script;
    document.getElementById('wordCount').textContent = words + ' / ' + wordsNeeded + ' target';
    document.getElementById('targetDuration').textContent = duration + 's';
    document.getElementById('estDuration').textContent = estSecs + 's';
    outputSection.classList.add('visible');
    outputSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

  } catch (e) {
    showError('Something went wrong: ' + e.message);
  } finally {
    btn.classList.remove('loading');
  }
}

function showError(msg) {
  const el = document.getElementById('errorCard');
  document.getElementById('errorText').textContent = '⚠ ' + msg;
  el.classList.add('visible');
}

function copyScript() {
  const text = document.getElementById('outputText').textContent;
  navigator.clipboard.writeText(text).then(() => {
    const btn = document.querySelector('.copy-btn');
    const orig = btn.textContent;
    btn.textContent = 'Copied!';
    setTimeout(() => btn.textContent = orig, 2000);
  });
}

// Allow Enter key in URL field to trigger generate
document.getElementById('amazonUrl').addEventListener('keydown', e => {
  if (e.key === 'Enter') generate();
});
</script>
</body>
</html>
